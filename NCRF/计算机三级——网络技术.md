# 网络系统结构与设计的基本结构
## 宽带城域网的结构
- **“三个平台，一个出口：管理平台，业务平台，网络平台和城市宽带出口”**
![[Pasted image 20250821111349.png]]
- 用户接入层：解决用户**“最后一公里”**的作用，主要用来**连接客户的**
>和用户接入有关的东西**（用户接入和本地流量控制）**基本上都是接入层的功能

- 边缘汇聚层：①***汇聚接入层的用户流量***，进行数据分组传输的汇聚转发交换。
②*根据汇聚层接入层的用户流量*，进行本地路由，过滤，流量均衡，QoS优先级管理，以及安全控制，IP地址转换，流量整形等处理;
③根据出来结构，***把用户流量转发到核心交换层***或本地进行路由处理。（承上启下）
>核心层和接入层**压根不接触**，而通过汇聚层进行数据交换，转发，以及呈交接入层的工作基本都是汇聚层的工作

- 核心交换层：①***将多个汇聚层连接起来***，为汇聚层网络提供高速转发，为整个城域网提供高速安全，且具有QoS保证能力的数据传输环境。
②实现与主干网的互联，***提供城市的带宽IP数据出口***
③***提供宽带城域网用户访问Internet所需路由服务***。
>与汇聚层交互，提供城市IP数据出口，提供Internet路由服务。是高层

## 管理和运营宽带城域网
## 网络管理
### 带内网络管理
利用***传统***电信网络，如数据通信网（DCN）或公共交换电话网（PSTN）拨号，对网络设备进行数据配置。

### 带外网络管理
指利用***IP网络及协议***进行网络管理，它利用简单网络管理协议（SNMP）建立网络管理系统，实时采集网络数据

***同时使用带内带外的网络管理原则：对汇聚层以下采用带内管理，对汇聚层及以上的设备采用带外管理***

### QoS（Quality of Service服务质量）
主要表现在延时，抖动，吞吐量，丢包率几个方面
- 目前宽带城域网保证QoS的要求技术有：***资源预留（RSVP）Resource ReSerVation Protocol，区分服务（DiffServ），多协议标记交换（MPLS）​​Multiprotocol Label Switching***
以及为了***解决IP地址不足***的问题，使用***内部专用IP地址与网络地址转换（NAT）***技术，只为宽带城域网的关键设备与特殊用户分配固定的公用IP地址。

## 构建宽带城域网
### 10G Ethernet（光以太网）技术
可运行光以太网的设备和线路必须要符合电信网络***五个九99.999%***的高运行可靠性并具备
①可根据终端用户***实际需求分配带宽***
②具有***认证和授权功能***，用户访问网络资源必须经过认真授权
③支持VPN和防火墙，保证网络安全
④***支持MPLS（多协议标签交换）***，有一定的服务质量保证，提供***分等级的QoS网络服务***
⑤提供计费功能，及时获得用户上网时间和流量记录
⑥方便扩展

### RPR弹性分组环
![[Pasted image 20250821114514.png]]
是一种***直接在光纤***上高效传输IP分组的传输技术
- ***双环结构：均可以用于传输和控制分组***
- ***外***环（***顺***时针），***内***环（***逆***时针）
- RPR有***自愈环***功能，可以在***50ms***的时间内隔离故障节点和光纤段
- 两个RPR节点间的裸光纤最大长度为***100km***
- 每一个节点都执行***SRP公平算法***
-   ***在RPR环中，源节点向目的节点成功发送的数据帧要由 目的节点 从环中回收***  
- RPR用***统计复用***的方法传输IP分组

## 网络接入技术（也称宽带接入技术）
### 数字用户线xDSL接入技术
x表示类型，***xDSL技术根据上行和下行的速率分为速率对称型和速率非对称型（在我们学习的内容中仅有HDSL对称）***
![[Pasted image 20250821120803.png]]
#### ADSL技术特点
- 可**利用现有的用户电话铜双绞线，以重叠，不干扰传统模拟电话业务的方式**即普通电话业务（POTS）方式提供高速数字业务
- 该技术与本地环路实际参数以及用户电话铜双绞线特性关系都不大，不需要重新铺设电缆
- ***上行速率在64～640kbit/s，下行速率在500kbit/s~7Mbit/s（与前表格不冲突，这个说的是在距离可变的情况下的速率区间）***

|    词语    |   传输方向   |     典型应用场景      |
| :------: | :------: | :-------------: |
| **下行速率** | 从网络到用户设备 |  下载文件、视频、加载网页   |
| **上行速率** | 从用户设备到网络 | 视频直播、上传照片、发送大邮件 |
### 光纤同轴电缆混合网HFC（是多用户共享带宽）
- HFC由*有线电视头端，长距离干线，放大器，馈线和下引线*组成。
- HFC是经过双向改造的有线电视网络，是***双向传输系统***，用户通过有线电视网宽带接入Internet
- HFC使用***Cable Modem***把***用户计算机***和***有线电视同轴电缆***连接，数据传输速率可达***10-36Mbit/s***
- ***Cable Modem（电缆调制解调器）利用 频分复用 的方法将信道分为上行信道和下行信道，把 用户计算机 与 有线电视同轴电缆 连接起来***
![[Pasted image 20250821131153.png]]

### 光纤接入技术（并非无线，光纤接入）
无源光纤网（PON **Passive Optical（与光有关的） Network**）标准化分类***（一级OC为：51.84Mbps）***
![[Pasted image 20250821131710.png]]
- OC-3其实就是3x一级OC的速率，而OC-3是***对称业务***
- 上行OC-3和下行OC-12其实***速率值也是直接相乘***
- 传输介质可以是***一根或两根单模光纤***，双向传输通过***波分复用WDM实现***
- APON（宽带无源光网络）是ATM PON简称，***ATM是基于信元的传输协议***
- ***OC-x速率为51.84xMbps***
>**ATM​**​ 指的是 ​**​异步传输模式（Asynchronous Transfer Mode）​**​

>***光纤传输系统的中继距离可以达到100km以上***
### 无线接入技术
- 802.11标准的无线***局域网接入技术（WLAN，WIFI）***，针对***近距离传输***
- 802.16标准的无线***城域网技术（WiMAX）***，针对***远距离传输***
- ***Ad hoc（无线网格网WMN）技术***
EEE802.11标准的重点在解决***局域网范围的移动节点***通信问题
![[Pasted image 20250821222759.png]]
- 802.11a提高速率到54Mbit/s


而IEEE802.16标准终点解决***建筑物之间的数据通信（建筑所以多为固定节点）***问题
![[Pasted image 20250821222819.png]]
- 802.16采用***全双工，宽带通信方式***
- 建立了无线网络使用更高毫米波的***10~66GHz***
- 与***802.16***标准工作组对应组织为***WiMAX***，最高速率***134Mbit/s***

### 特殊题目
![[Pasted image 20250821224001.png]]

# 中小型网络总体规划和设计
## 核心层网络结构设计：技术标准主要是GE/10GE，核心设备时高性能交换路由器，整个***网络流量的40%-60%***都需要由核心层网络承担
![[Pasted image 20250821230231.png]]
- 这种方法的核心***路由器的流量压力大***，因为被所有的服务器连接

![[Pasted image 20250821230259.png]]
- 当交换机坏掉，会全部瘫痪
- 且核心路由器不多，总带宽有限
>***两者均采用了链路冗余的方法***

## 汇聚层和接入层的设计
汇聚层网络可以将位于不同位置的子网连接到核心层网络，实现***路由汇聚***的功能对网络系统进行分层设计可便于规划与分配带宽，有利于均衡负荷，提高网络效率。实际情况验证：***层次之间的上联带宽与下一级带宽之比***一般控制在***1：20（这一节只需要记好这个数字）***

## 网络关键设备选型
### 路由器
#### 分类和标准
***40Gbit/s的路由器背板交换能力是区分高端和中低端的分水岭***
![[Pasted image 20250821231119.png]]
- ***①吞吐量***：指路由器的包转发能力，包括端口吞吐量与整机吞吐量。路由器的***包转发能力***与路由器的***端口数量、速率、包类型、包长度***关系密切。***（包转发能力只是用来衡量，且这四个指标只能用来衡量包转发能力，不能直接决定吞吐量）***
- ***②背板能力***：背板是路由器输入输出端之间的物理通道，它***决定了路由器的吞吐量***，高性能路由器一般采用***交换式***结构，而传统路由器采用***共享背板***
- ***③丢包率***：常被用作***路由器超负荷工作时的性能衡量指标***
- ④延时与延时抖动：从数据包的第一个比特进入路由器，到该帧的最后一个比特离开路由器其间所经历的时间，一般***不把其作为主要指标***（数据包对延时要求不高），***语音、视频业务对延时抖动要求却较高***
- ***⑤突发处理能力***：常以***最小帧间隔发送数据包而不引发丢失的最大发送速率***来衡量突发处理能力。
- ⑥路由表容量：路由表是决定包转发路径的主要依据
- ⑦服务质量：主要表现在***队列管理机制、端口硬件队列管理、支持QoS协议***上
![[Pasted image 20250821232105.png]]

#### 高端路由器可靠可用性指标（两个50ms）
- 无故障连续工作时间***（MTBT ***Mean Time Between Failures***）大于10万小时***，故障恢复时间***30分钟***
- 系统自动保护切换功能，切换时间小于***50ms***
- SDH与ATM接口自动保护切换功能，切换时间小于***50ms***
- 主处理器、存储器、电源、总线与接口管理等需要有热插拔冗余，线卡有备份
- 路由器不存在单点故障。

### 交换机
#### 分类
![[Pasted image 20250823205949.png]]
##### 分类指标
![[Pasted image 20250823210042.png]]
- ***重点：全双工端口带宽的计算公式：端口数x端口速率x2***
- ***bps和byte的单位转换重点***

| 单位 | 进制 | 例子 |
| :---: | :---: | :---: |
| bps（比特每秒） | 1000进制 | 1Kbps = $10^3$ bps |
| Byte（字节） | 1024进制 | 1KB = $1024$ Byte |
## 网络服务器选型
### 服务器种类
![[Pasted image 20250823211834.png]]
- ​CISC (Complex Instruction Set Computer，复杂指令集计算机)​​：通过​​硬件​​提供功能丰富、复杂的指令，一条指令能做很多事情。
- RISC (Reduced Instruction Set Computer，精简指令集计算机)​​：通过​​软件（编译器）​​ 组合简单、固定的指令来完成复杂任务，一条指令只做一件简单的事。***基于RISC结构处理器的服务器操作系统通常采用Unix***
### 服务器有关技术
- **热插拔技术**：热插拔功能允许用户在不切断电源的情况下，更换存在故障的***硬盘、内存、板卡、电源***（有多个电源）等部件。从而提高系统对突发事件的应对能力。 
- ** 集群（Cluster）技术**：集群技术是向一组独立的计算机提供高速通信线路，组成一个共享数据存储空间的服务器系统，提高了系统的数据处理能力。
- **高性能存储、智能I/O技术：存储能力是衡量服务器性能的重要指标之一**
### 服务器性能
服务器的性能主要表现在：磁盘存储能力、运算处理能力、可扩展性与可管理性、高可用性等。
#### ***系统高可用性***
![[Pasted image 20250823212701.png]]
***三八***八点八，四***五三***，***五五五***，尤其注意：这里说的是小于等于，**有时候不会给你端点的时间，而是区间内的时间**

### 需记忆题目
![[Pasted image 20250823213628.png]]
![[Pasted image 20250823213717.png]]
- B选项说的是C/S架构

# IP地址规划技术（知道了的全部截图，不浪费时间笔记）
![[Pasted image 20250823214153.png]]
## ***IP地址分类***
尤其注意**不同类IP地址首位十进制数**的区间：***A类1~127，B类128~191，C类192~223，D类224~239，E类240~255。***
![[Pasted image 20250823214549.png]]
### 分配约束
![[Pasted image 20250823214752.png]]
#### 特殊地址
![[Pasted image 20250823214931.png]]
![[Pasted image 20250823214942.png]]
## 子网划分
![[Pasted image 20250823215213.png]]
![[Pasted image 20250823215359.png]]
### 象征性总结常考的（其实都很简单）
- 网络地址：看IP和子网掩码，即网络位不变，主机位全0
- 直接广播地址：网络号不变，主机号全1
- 受限网络地址：全1
- 主机号：网络位全0，主机位不变（不常见）
- 第一个可用IP：网络地址+1
- 最后一个可用IP：直接广播地址-1

## 子无类域间路由技术（CIDR Classless Inter-Domain Routing，无类别域间路由：换一种IP表达方法）

## NAT工作原理
![[Pasted image 20250823220114.png]]
S：Source（源头）
D：Destination（目的地）
- 主机找Internet：***源经过NAT变化（IP+端口号），目的地址就是Internet的地址不变；***
- Internet回复：***源就是主机找Internet的目的地址，目的就是主机转化后的IP地址；***
- 特别注意一下***ftp、http***访问内网某台主机时，目的地址应该是转化后的该主机地址
以这个图片为例子吧
![[Pasted image 20250823220826.png]]

## IPv6地址规划方法
![[Pasted image 20250824231145.png]]
- **仅前导0可以简化**
![[Pasted image 20250824231527.png]]
- **128位**表示一个IPv6地址，每**16位划分8个位段（所以说每段转化为16进制数后为4位），每个位段转化为16进制数，用冒号隔开**
- IPv6每个段的**前导0可以省略，不可把位段中的有效0压缩**
- 若包含一长串0，可以把***连续位段均为0的地方简写为：：，且这种写法只可在一个地址中出现一次（尤其注意只可出现一次）***
- ***IPv6只支持前缀长度表示法​**​*：在表示一个IPv6网络或子网时，​**​不能​**​像IPv4那样使用“子网掩码”（如 `255.255.255.0`），而​**​必须​**​使用“斜杠记法”（CIDR记法），即在IPv6地址后面加上一个斜杠`/`和一个表示网络位长度的数字（如 `/64`）

# 路由设计基础
## IP路由选择
![[Pasted image 20250824233140.png]]
### 分组转发
分组转发是指路由器转发IP分组的物理传输过程。一台主机通常是与一台路由器相连接，这台路由器则为默认路由器，也叫第一跳或***缺省路由器***。 
#### 分类
- 直接转发：同一网络
- 间接转发：不同网络
![[Pasted image 20250824233358.png]]

### 路由选择算法分类
![[Pasted image 20250824233605.png]]
![[Pasted image 20250824233623.png]]

## 路由汇聚
***简单的汇聚方法：从不同的开始找，不同的以及之后的变0，相同的照抄，并把相同的位数作为CIDR的数***
- **但题目不会出的这么直接：比如有时候需要先两个聚合，然后再去跟第三个聚合，也可以选择直接三个聚合**
- **不在同一地址块的（在同一网络下才可以一块儿聚合（某公司，某企业，某学校）），当没有在同一网络下的条件时，子网掩码不同是不在同一网络下的，不可聚合。但若两个聚合后和第三个ip地址的子网掩码相同则可以再聚合**
![[Pasted image 20250825132100.png]]

### **！特殊情况（任意一个不满足触发）**
- **1.聚合后的IP不可与已有（被聚合）的IP相同**
- **2.聚合后可分配主机数>3（注意减去头和尾的网络地址和受限广播地址：$2^n-2$）**
- ***当触发1时，也是需要向网络位借主机位置（目的是借到网络位的一个二进制的“1”，让这个聚合后的IP地址变化，不再和被聚合的某个IP地址一样），注意：在这个过程中，如果首次聚合的IP同时触发了1,2条件，在解决问题1的时候也可以解决问题2，因为问题1的解决可能会需要多次借位，借借借借到厌倦***
- **当触发2时，需要往网络位借位给主机位置，让可分配主机数更多，直到满足条件2**
![[Pasted image 20250825000634.png]]
#### eg1：聚合172.0.147.161，172.0.147.162，172.0.147.163，
172.0.147.101000 01   
172.0.147.101000 10  ==> 172.0.147.10100 000
172.0.147.101000 11       $2^2-2=2<3$      
**触发条件2**，借位变为172.0.147.160/29
#### eg2：聚合172.0.147.145，172.0.147.144，172.0.147.146
172.0.147.100100 00
172.0.147.100100 01 ==> 172.0.147.101000 00
172.0.147.100100 10
**触发条件1+2**，借位变成172.0.147.10010 000**解决条件2仍然触发条件1**，再次172.0.147.1001 0000，再次172.0.147.100 00000可，变为172.0.147.128/27

## 路由选择协议
### 自治系统
![[Pasted image 20250825132325.png]]
路由选择协议有：***内部网关协议（RIP/OSPF），外部网关协议（BGP）***
#### RIP（路由信息协议Routing Information Protocol）基于***距离向量***
![[Pasted image 20250825132519.png]]
- RIP原理：路由刷新报文的主要内容是**若干个（V，D）表**
- V：表示该路由器可以到达的***目的网络或者目的主机***
- D：对应该路由上的***“跳数”***
- RIP规定，路由器每***30s周期性***向外广播一个（V，D）报文
- RIP规定，一条有限的路径长度不能超过***15***
VD便于记忆：
![[Pasted image 20250825134140.png]]
### RIP工作过程
路由表的更新：见计网大题详解,***按照最短路径原则更新***
### OSPF（开放最短路径优先，Open Shortest Path First）
![[Pasted image 20250825133021.png]]
#### 特点
- ①OSPF使用***分布式链路状态协议***，而RIP使用的是距离向量协议（使用距离或跳数来确定传输路径）。
- ②OSPF协议要求路由器发送的信息是本路由器与哪些路由器相连，以及链路状态的度量。***链路状态“度量”***主要是指***费用、距离、延时、带宽***等（记录的信息比RIP多）。
- ③OSPF协议要求当链路状态发生变化时用***“洪泛法”***向所有路由器发送此信息， 而RIP仅向自己相邻的几个路由器发送交换路由信息。
- ④路由器之间频繁地交换链路状态信息，因此所有路由器最终都会建立一个***链路状态数据库***，也就是***全网拓扑结构图***。
- ⑤为了适应规模很大的网络，并使更新过程收敛的更快，OSPF协议将一个自治系统再划分为若干个更小的范围，叫做***区域***。
- ⑥每个区域有一个***32位区域标识符***（用点分十进制表示），在一个区域内的路由器数***不超过200个***
### BGP（边界网关协议，Border Gateway Protocol）基于***路径矢量***
#### 主要特征
- ①BGP也称***边界网关协议***（又称为外部网关协议），是在AS（**自治系统​**​（Autonomous System））之间传递路由信息以及控制优化路由信息。 
- ②BGP是一种***“路径矢量”路由协议***，BGP-4采用了***路由向量路由协议***，与RIP、 OSPF有很大区别。 
- ③为了保证BGP的可靠传输，BGP发言人之间交换信息需要先建立***TCP连接（重要）***
### 工作过程
![[Pasted image 20250825133858.png]]
- 打开是**建立关系**
- 更新是**发送路由消息（或撤销），需要周期性的一般为30s确认**
- 保活是**确认打开报文和证实关系**
- 通知是**发送检测差错，路由信息发生变化时用的是UPDATE而非NOTIFICATION**

# 局域网技术基础及应用
## 局域网组网基础
局域网是一种分布在较小距离范围，连接各种设备并为这些设备间的信息交换提供途径的计算机网络。局域网采用***IEEE802标准***
![[Pasted image 20250825135242.png]]

## OSI参考模型
![[Pasted image 20250825135319.png]]
## 重点：传统以太网的物理层标准命名法
![[Pasted image 20250825135357.png]]***特别注意x和y的单位，Mbps和100m***

## 综合布线系统（PDS **​Premises Distribution System​**）
![[Pasted image 20250825135541.png]]
![[Pasted image 20250825135558.png]]
### 系统标准（只需要对应就可以）
- ①ANSI/TIA/EIA 568-A：定义了语音与数字通信布线系统
- ②TIA/EIA 568-B
![[Pasted image 20250825142645.png]]

- ③ISO/IEC **11801**（把有关元器件和测试方法归入国际标准） 
- ④GB/T***50311—2000***和GB/T***50312-2000***（我国指定的综合布线系统工程的国家标准）
### 传输介质
![[Pasted image 20250825143052.png]]
### 连接设备
![[Pasted image 20250825143620.png]]
### 建筑群子系统设计（建筑物之间一般用光纤连接）
通信线路铺设主要有：***地下管道布线、直埋布线、架空布线、巷道布线***4种方式或者是这4种方式的任意组合。
#### 地下管道布线（最好，最理想，最有利于保护）
![[Pasted image 20250825143736.png]]
#### 巷道布线
![[Pasted image 20250825143834.png]]
#### 直埋布线（最不利于保护）
![[Pasted image 20250825143854.png]]
#### 架空布线
![[Pasted image 20250825143910.png]]

### 设备间子系统（垂直干线或水平干线）
![[Pasted image 20250825144005.png]]
### 管理子系统（增加交换更改扩展改变线缆路由）
![[Pasted image 20250825144016.png]]
### 干线（垂直）子系统（点对点和分支结合，也可混合使用）
![[Pasted image 20250825144053.png]]
#### 水平子系统（工程最大，范围最广，最难施工）
![[Pasted image 20250825144106.png]]
- ***电缆长度一般不超过90m***
- 高速率要求时，用**光纤**
#### 工作区子系统
![[Pasted image 20250825144207.png]]
- 嵌入式安装插座用于***连接双绞线***
- 多介质信息插座用于***连接铜缆和光纤***
![[Pasted image 20250825144216.png]]
- 单一信息插座进行两项服务：采用***一线两用或Y形适配器***
- 连接使用不同信号的***数模转换***和***数据速率转换***装置，采用适配器
## 局域网互联设备
### 中继器（工作在物理层，不是网络互联设备）
- 负责两个节点在物理层上按位传递信息，对传输介质上的信号波形***接收、放大、整形、转发***。
- ***不对帧做任何处理***，仅起到增加传输介质长度的作用，所以中继器***不属于网络互联设备***。
### 网桥
- 网桥是连接两个局域网的设备，工作在***MAC子层(数据链路层的一个子层)***上，并且它可以完成具有相同或相似体系结构的网络系统的连接。
- 网桥是***依靠MAC地址表***来确定帧是否需要发，以及向何处转发。
- ***透明网桥***和***源路由网桥***的标准分别由***IEEE802.1***与***IEEE802.5***两个分委会制定。 
- 其中透明网桥的标准为***IEEE802.1d***。透明网桥采用***生成树算法***，来防止出现环路情况。
### 交换机
- 基于***MAC地址***识别，能完成封装转发数据包功能的网络设备
- 二层交换机工作于***数据链路层***，它建立和维护一个表示***MAC地址与交换机端口***对应关系的交换表。
- 三层交换技术就是二层交换技术加上三层转发技术，是在***网络模型中的第三层（网络层）***，实现了数据包的高速转发，既可以实现网络路由功能，又可根据不同网络状况做到最优网络性能。
### 集线器（工作在物理层，并不根据MAC地址接收并转发）
- 集线器的主要功能是对接收到的信号进行**再生整形放大**，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。
- 发送数据没有针对性，采用***广播***的方式发送
- 工作在***物理层***，所有节点通过双绞线连接在一个集线器上，***节点（不是集线器而是节点）***执行CSMA/CD（C​arrier ​S​ense ​M​​ultiple ​​A​​ccess with ​C​​ollision ​​D​​etection）介质访问控制方法
- 当一个结点发送数据时，***所有结点***都能接收到。连接到一个集线器的所有结点***共享一个冲突域***。通过在网络链路中串接一个集线器可以监听该链路中的数据包，多个结点***不能同时发送数据帧，可以同时接收数据帧。***即为网络拓扑中的总线结构

# 交换机及其配置
## 交换机基础
![[Pasted image 20250825151414.png]]
### 基本功能
**建立和维护一个表示MAC地址与交换机端口对应关系的交换表。** 
**在发送节点和接收节点之间建立一条虚连接**【即发送方所连接的交换机端口（源端口）到接收方所连的交换机端口（目的端口）之间建立虚连接】完成数据帧的转发或过滤。
## 交换表
**小型交换机交换表（35系列）**，交换机在***超级用户模式***下：**show mac-address-table    记法：展示mac地址表**
![[Pasted image 20250825171836.png]]
- ***目的mac地址（注意是点分隔***）、地址类型、VLAN、目的端口
**大型交换机交换表（40/65系列）**，交换机在超级用户模式下：**show cam dynamic**
![[Pasted image 20250825172009.png]]
- 表中**无地址类型**
- VLAN，***目的mac地址（短横线分隔）***，端口
## 交换机的交换模式
### 静态交换
静态交换是由人工来完成端口之间传输通道的建立。
### 动态交换
动态交换方式中依据目的***MAC地址查询交换表***，根据表中给出的输出端口来临时建立传输通道，这个传输通道在*一个数据帧传送完成后自动断开*。
- 交换机最常采用动态交换方式
- 动态交换模式主要有存储转发和直通两种模式。而直通模式又有快速转发交换和碎片丢弃交换两种方式。 归纳起来，交换机主要有***快速转发、碎片丢弃、存储转发***三种交换模式。
### 交换模式差异
#### 快速转发交换模式
- 也称作***直通交换模式***，他是交换机接收了帧的***前14个字节***，即接收到***帧中6个字节***的目的地址后便*立即转发数据帧*。该交换模式在整个数据帧到之前就开始转发。
- 优点：端口交换时***交换时间短、时延小，交换速度快***；
- 缺点：不能进行***检错纠错、速度匹配和流量控制***，可靠性较差，适用于**小型交换机**

>为什么一定是帧的前14个字节呢？
>**——只需要知道到哪儿去就可以了，即7+1+6**

![[Pasted image 20250825193304.png]]
#### 碎片丢弃交换模式
- 也称为***无分段交换模式***，在开始转发之前先过滤掉掉造成大部分数据报错误的冲突片。
- 先检查数据包的长度是否够***64字节***。如果帧的长度小于64，则被视为碎片，交换机***直接丢弃***；而任何***大于64字节***的数据帧都被交换机视为**有效帧，进行转发**；
- 优点是过滤掉了冲突碎片，提高了网络传速的效率和带宽的利用率
#### 存储转发交换模式
- 将接收到的***整个数据帧保存在缓冲区***中，然后进行***循环余码校验检查***，对错误数据帧进行处理后，才取出数据帧的目的地址，进行转发操作
- 不足在于*数据处理延时大，交换速度相对较慢*
- 但是它可以对数据帧进行链路差错检验，**可靠性较高**，能有效地址改善网络性能；
- 同时它可以**支持不同速率**的端口，保持高速端口与低速端口之间的协同工作

### 交换结构差异
| 交换结构类型        | 优点                    | 缺点                                        |
| :------------ | :-------------------- | :---------------------------------------- |
| **软件执行交换结构**  | 结构灵活、易于升级             | 交换速度慢、交换机堆叠困难、交换机端口较多时性能显著下降，主要用于早期的交换机产品 |
| **矩阵交换结构**    | 交换速度快、延时小、结构紧凑、实现相对简单 | 不易扩展、不方便进行性能监控                            |
| **总线交换结构**    | 性能较好、便于堆叠扩展、易于实现广播    | 对总线带宽要求较高                                 |
| **共享存储器交换结构** | 是总线结构的一种变形，结构简单、易于实现  | 规模扩大时产生延时、成本也较高                           |
## 虚拟局域网技术
### VLAN
- 虚拟网VLAN是以交换式网络位基础，把用户的终端设备划分为若干个逻辑工作组每个逻辑工作组就是一个VLAN。
![[Pasted image 20250825200413.png]]
- 由于二层交换机工作在数据链路层，VLAN也工作在***数据链路层***
- VLAN可**隔离广播信息，每个VLAN为一个广播域**，VLAN中的广播信息只能发送给这个VLAN内部的成员，并不发送给其他VLAN成员。
- 一个VLAN就是一个独立的***逻辑网络（和物理位置、网段无关）***，每个VLAN都具有***唯一的子网号***。不同VLAN中的主机之间必须通过**路由器或者三层交换机，才能实现相互通信**
#### 标识
##### VLAN ID
- VLAN通常用***VLAN ID（Vlan号）、VLAN name（Vlan名）***标识。
- IEEE802.1Q协议规定，VLAN ID用***12位（bit）表示***，可以支持***4096个VLAN***。其中***1～1005是标准范围，1006～1024为保留范围，1025~4096是扩展范围***，但*并不是所有交换机都能支持4096个VLAN。*
- 一部分交换机***只支持标准范围1~1005***，其中能用于***以太网的VLAN ID为1~1000（2-1000也正确，1可以作为管理地址也对，但尾部只能是1000）***，***而1002~1005为FDDI和令牌环网使用的VLAN ID。***
##### VLAB name
- VLAN name用***32个字符***表示，可以是*字母和数字*。
- 若创建一个VLAN时，没有给定名字，则系统按默认方式，自动给出命名，***默认为VLAN00 XXX（"XXX"即为该VLAN的VLAN ID）***，如VLAN ID为111，其默认的VLAN名为***VLAN 00111（只缺省了两个0）***。
- 划分VLAN方法有：***基于端口划分***；基于MAC地址划分；基于第三层协议划分。

## 交换机配置
**对于还没有配置设备管理地址的交换机应采用Console端口配置**
### 设置系统时间
#### Cisco IOS系统（35系列）
- ***命令格式：clock set hh（时）：mm（分）：ss（秒） day（日）month（月）year（年)***
- ***记忆方式：35clock set 时 日(加不了星期)***
![[Pasted image 20250825204810.png]]
#### Catalyst OS(65系列)
- ***命令格式：set time  [day_of_week]   [mm（月）/dd（日）/yy（年）]   [hh（时）:mm（分）:ss（秒）]***
- ***记忆方式：65set time （星期） 日（日月颠倒） 时***
![[Pasted image 20250825204826.png]]
### 配置设备管理地址（IP地址）与缺省路由
#### Cisco IOS系统（35系列）
- ***配置IP地址命令语句：ip address<IP地址><子网掩码>;***
- ***配置缺省路由命令语句：ip default-gateway<缺省路由IP地址>；***
- ***注意！！！：设置缺省路由不可在端口模式（config）下，而应该退出到全局配置模式下配置（config）***
- 记忆方式：35系列都ip
#### Catalyst OS(65系列) 
- ***配置IP地址命令语句：set interface sc0 <IP地址><子网掩码><直接广播地址>；***
- ***配置缺省路由命令语句：set ip route 0.0.0.0<缺省路由IP地址>;***
- 记忆方式：65系列都set开头
### Cisco IOS系统（35系列）综合设置
#### 配置交换机的端口描述信息
##### 步骤一：进入端口配置模式
Switch-3528-TEST(config) # ***interface f0/1（f0/1代表快速以太网端口的第一个端口，光以太网的端口为g0/x）***
- ***（config）代表已经进入全局配置模式下***
Switch-3528-TEST(config-if) #
- ***（config-if）代表进入端口模式下,可以通过输入命令texit退出到config***
##### 步骤二：配置端口描述信息
Switch-3528-TEST(config-if) # ***description To-Webserver***
#### 配置交换机端口的关闭与开启
##### 步骤一：进入端口配置模式
Switch-3528-TEST(config) # ***interface fastethernet0/1***（fast ethernet顾名思义）
Switch-3528-TEST(config-if) #

##### 步骤二：关闭或开启端口
Switch-3528-TEST(config-if) # **shutdown (关闭端口)***
Switch-3528-TEST(config-if）#**no shutdown(开启端口，使端口处于工作状态)***
#### 配置交换机端口的通信方式
Switch-3528-TEST(config-if）#***duplex auto***（设置为自动协商（自适应），默认为止
种方式)
Switch-3528-TEST(config-if) # ***duplex full*** ((设置为全双工)
Switch-3528-TEST(config-if) # ***duplex halff*** (设置为半双工)
#### 配置交换机端口的传输速率
Switch-3528-TEST(config-if）# ***auto***（设置端口为自动速率配置)
Switch-3528-TEST(config-if) # ***speed 10*** (设置端口速率为10Mbit/s)
Switch-3528-TEST(config-if)#***speed 100*** (设置端口速率为100Mbit/s)***单位全部为Mbit/s***
### Catalyst OS (65系列)综合设置
#### 配置交换机的端口描述信息
- 命令格式：***set port name <mod/port> name ***，其中，name 为端口描述，字符数一般不超过240个
- eg:Switch-6509-TEST(enable) # set port name 0/1 to-Webserver
Switch-6509-TEST(enable)
#### 配置交换机端口的关闭与开启
- 命令格式：***set port disable<mod/port>***(关闭端口)
***set port enable <mod/port>*** (打开端口)
- *mod和port指的模块号（Module）和端口号（Port）​​*
- eg:Switch-6509-TEST(enable)set port disable 0/1 (关闭0/1号端口)
Switch-6509-TEST(enable)set port enable 0/1 (打开0/1号端口)
#### 配置端口的通信方式
- 命令格式：***set port duplex<mod/port>full***(设置全双工)
***set port duplex<mod/port>half***(设置为半双工)
- eg:Switch-6509-TEST(enable)set port duplex 0/1 full (0/1端口设置为全双工)
Switch-6509-TEST(enable)set port duplex 0/1 half (0/1到0/24端口设置为半双工)
#### 配置端口的传输速率
- 命令格式：***set port speed <mod/port> auto*** (自适应)
***set port speed <mod/port> <port_speed>*** 设置制定端口速率，***当设置多个端口时将端口x到端口y之间用-连接***
- eg:Switch-6509-TEST(enable)set port speed 0/1 auto (设置端口的速率为自适应)
Switch-6509-TEST(enable)set port speed 0/1-24 10 (设置端口0/1到0/24的速率为10Mbps）
## 交换机VLAN配置
### VLAN的建立和删除
#### Cisco IOS系统（35系列）
##### 建立VLAN
- 命令格式：***vlan <vlan_ID> name <vlan_name>***
- eg:Switch-3528-TEST # ***vlan data（进入vlan配置）***
Switch-3528-TEST>(vlan) # vlan 100 name vlanwork
##### 删除VLAN
- Switch-3528-TEST>***(vlan)*** # ***no vlan <vlan_ID>（在vlan配置下）***
- ***修改VLAN与建立VLAN步骤完全相同，将<vlan_ID>填一样的即可***
- eg:Switch-3528-TEST>(vlan) # vlan 100 name vlanwork
Switch-3528-TEST>(vlan) # vlan 100 name vlangroup
#### Catalyst OS (65系列)
##### 建立VLAN
- 命令格式：***set vlan <vlan_ID> name <vlan_name>***
- eg:Switch-6509-TEST>(enable)set vlan 100 name vlan 100 (建立VLAN 100, 名称为
vlan 100)
##### 删除VLAN
- Switch-6509-TEST>***(vlan)***# ***clear vlan <vlan_name>***
- ***修改VLAN与建立VLAN步骤完全相同，将<vlan_ID>填一样的即可***
- eg:Switch-6509-TEST>(enable) set vlan 100 name vlan 100
Switch-6509-TEST>(enable) set vlan 100 name vlan 1000